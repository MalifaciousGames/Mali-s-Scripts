/* Mali's update wrapper markup */

((e=!1)=>{const t=Wikifier.helpers.shadowHandler||Wikifier.helpers.createShadowSetterCallback,a=()=>$('[role="update-wrapper"]').each(((e,t)=>t.update()));Wikifier.Parser.add({name:"updateMarkup",match:"{{(?:.*?}})",handler(e){const a=e.matchText.slice(2,-2).trim(),r=$("<span role='update-wrapper'>").text(stringFrom(State.getVar(a))).get(0),p=t(`State.getVar("${a}")`);r.update=function(){this.innerText=stringFrom(p())},e.output.append(r)}}),$(document).on("change click drop refreshUpdateContainers",(()=>{e||(a(),e=!0,setTimeout((()=>e=!1),100))})),setup.updateWrappers=a})();