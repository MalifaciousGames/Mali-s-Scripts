/* Mali's update markup */

((e=!1)=>{const r=Wikifier.helpers.shadowHandler||Wikifier.helpers.createShadowSetterCallback,t=[],a=()=>{if(e)return;let r=t.length-1;for(;r>=0;){const{wrapper:e,shadowGetter:a}=t[r];e.isConnected?(e.innerText=stringFrom(a()),r--):t.splice(r--,1)}e=!0,setTimeout((()=>e=!1),150)};Wikifier.Parser.add({name:"updateMarkup",match:"{.*?{.*?}}",handler(e){const[a,i,p]=e.matchText.match(/{(.*?){(.*?)}}/),n=$(`<${i.trim()||"span"} aria-live='polite'>`)[0];t.push({wrapper:n,shadowGetter:r(`State.getVar("${p.replace(/"|'|`/g,(e=>`\\${e}`))}")`)}),n.innerText=stringFrom(State.getVar(p)),e.output.appendChild(n)}}),$(document).on("change click drop keyup",a),setup.updateWrappers=a,Wikifier.Parser.Profile.compile()})();