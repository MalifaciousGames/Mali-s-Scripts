/* Mali's update wrapper markup */

((e=!1)=>{const t=Wikifier.helpers.shadowHandler||Wikifier.helpers.createShadowSetterCallback,a=()=>$('[role="update-wrapper"]').each(((e,t)=>t.update()));Wikifier.Parser.add({name:"updateMarkup",match:"{.*?{.*?}}",handler(e){const[a,r,p]=e.matchText.match(/{(.*?){(.*?)}}/),i=$(`<${r.trim()||"span"} role='update-wrapper'>`).text(stringFrom(State.getVar(p))).get(0),n=t(`State.getVar("${p.replace(/"|'|`/g,(e=>`\\${e}`))}")`);i.update=function(){this.innerText=stringFrom(n())},e.output.append(i)}}),$(document).on("change click drop refreshUpdateContainers",(()=>{e||(a(),e=!0,setTimeout((()=>e=!1),100))})),setup.updateWrappers=a})();