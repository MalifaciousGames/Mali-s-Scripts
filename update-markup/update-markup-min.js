/* Mali's update markup */

((e=!1,t=0)=>{const r=Wikifier.helpers.shadowHandler||Wikifier.helpers.createShadowSetterCallback,a=()=>{if(e)return;const r=$('[role="update-wrapper"]');r.length||(t=0),t&&(r.each(((e,t)=>t.update())),e=!0,setTimeout((()=>e=!1),100))};setup.updateWrappers=a,Wikifier.Parser.add({name:"updateMarkup",match:"{.*?{.*?}}",handler(e){const[a,i,n]=e.matchText.match(/{(.*?){(.*?)}}/),p=$(`<${i.trim()||"span"} role='update-wrapper' aria-live='polite'>`)[0],o=r(`State.getVar("${n.replace(/"|'|`/g,(e=>`\\${e}`))}")`);p.innerText=stringFrom(State.getVar(n)),p.update=function(){const e=stringFrom(o());e!==this.innerText&&(this.innerText=e)},t++,e.output.appendChild(p)}}),$(document).on("change click drop refreshUpdateContainers",a),Wikifier.Parser.Profile.compile()})();